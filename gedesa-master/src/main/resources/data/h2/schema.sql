DROP TABLE LINEAS_PEDIDO 	IF EXISTS;
DROP TABLE PEDIDOS 			IF EXISTS;
DROP TABLE PRODUCTOS 		IF EXISTS;
DROP TABLE DIRECCIONES 		IF EXISTS;
DROP TABLE DATOS_CONTACTO 	IF EXISTS;
DROP TABLE CLIENTES 		IF EXISTS;
DROP TABLE COMERCIALES		IF EXISTS;

CREATE TABLE COMERCIALES(

	ID					INTEGER				NOT NULL,
	NOMBRE				VARCHAR(200)		,
	APELLIDO1			VARCHAR(200)		,
	APELLIDO2			VARCHAR(200)		,
	
	PRIMARY KEY(ID)
);

CREATE TABLE CLIENTES(

	ID					VARCHAR(30)			NOT NULL,
	NOMBRE_COMERCIAL	VARCHAR(250)		,
	NOMBRE				VARCHAR(100)		,
	APELLIDO1			VARCHAR(100)		,
	APELLIDO2			VARCHAR(100)		,
	DIRECCION			VARCHAR(150)		,
	POBLACION			VARCHAR(150)		,
	CODIGO_POSTAL		VARCHAR(20)			,
	PROVINCIA			VARCHAR(150)		,
	PAIS				VARCHAR(100)		,
	TELEFONO			VARCHAR(25)			,
	MOVIL				VARCHAR(25)			,
	EMAIL				VARCHAR(250)		,
		
	PRIMARY KEY(ID)
);

CREATE TABLE PEDIDOS(

	CODIGO				BIGINT				NOT NULL,
	FECHA_HORA			TIMESTAMP			,
	ESTADO				VARCHAR(10)			,
	ID_COMERCIAL		INTEGER				,
	ID_CLIENTE			VARCHAR(30)			,
	OBSERVACIONES		VARCHAR(250)		,
	
	
	PRIMARY KEY (CODIGO),
	FOREIGN KEY (ID_COMERCIAL) REFERENCES COMERCIALES (ID),
	FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES (ID)
);

CREATE TABLE PRODUCTOS(

	CODIGO				INTEGER				NOT NULL,
	NOMBRE				VARCHAR(200)		,
	FECHA_ALTA			DATE				,
	PRECIO				DOUBLE				,
	FAMILIA				VARCHAR(15)			,
	DESCATALOGADO		BOOLEAN				,
	
	PRIMARY KEY (CODIGO)
);

CREATE TABLE LINEAS_PEDIDO(

	CODIGO_PEDIDO		BIGINT				NOT NULL,
	CODIGO_PRODUCTO		INTEGER				NOT NULL,
	CANTIDAD			INTEGER				,
	
	PRIMARY KEY (CODIGO_PEDIDO, CODIGO_PRODUCTO),
	FOREIGN KEY (CODIGO_PEDIDO) REFERENCES PEDIDOS (CODIGO),
	FOREIGN KEY (CODIGO_PRODUCTO) REFERENCES PRODUCTOS (CODIGO)

);

